## 인터넷 네트워크 정리
> 모든 개발자를 위한 HTTP 웹 기본 지식 section 2를 듣고 정리

### 인터넷 통신

> [!tip] 인터넷을 이용한 통신
>수 많은 중간 노드(서버)를 거쳐서 메세지가 전달돼야함
>전달 하기 위해서 필요한것이 IP(Internet Protocol)
### IP(Internet Protocol)

> [!info] IP 프로토콜의 역할
> - 지정한 IP 주소에 데이터 전달
> - 패킷이라는 통신 단위로 데이터 전달

> [!error] IP 프로토콜의 한계
> - 비연결성
> 	- 패킷을 받을 대상이 없거나 서비스 불능 상태여도 패킷 전송
> - 비 신뢰성
> 	- 중간에 패킷이 사라져도 알 수 없음
> 	- 패킷이 순서대로 안와도 알 수 없음
> - 프로그램 구분
> 	- 같은 IP를 사용하는 서버에서 통신하는 애플리케이션이 둘 이상인 경우 구분을 할 수 없음

### TCP, UDP

![[Pasted image 20241124181306.png]]

#### **1. 소켓 라이브러리와 통신 구조**

- 소켓 라이브러리는 애플리케이션 계층에서 네트워크 계층(TCP/IP)과의 통신을 연결하는 인터페이스 역할
- 모든 주요 웹 프레임워크에는 소켓 라이브러리를 포함하고 있다

#### **2. `socket.io`와 Node.js의 모듈 차이

- Node.js의 소켓 모듈(net)
	- TCP / UDP와 같은 저수준 통신을 위한 기본 모듈

- `socket.io`
	- WebSocket과 같은 고수준 실시간 통신 프로토콜을 추상화한 라이브러리
	- 자동 풀백 지원
	- 이벤트 기반의 실시간 통신에 적합

#### **3. Nest.js에서 TCP/IP 통신**

- 기본 HTTP/HTTPS 통신은 Express/Fastify를 통해 자동으로 처리되며, 내부적으로는 Node.js의 `http` 모듈이 TCP 소켓을 활용.
- **TCP 통신**은 `@nestjs/microservices`를 사용하여 별도로 설정 가능.
- **WebSocket 통신**은 `@nestjs/websockets` 모듈을 통해 쉽게 구현 가능.
- 저수준 TCP 통신이 필요하면 Node.js의 `net` 모듈을 직접 사용 가능.

#### **4. TCP에서 데이터 전송 보장 및 순서 보장**

- **데이터 전송 보장**:
    - **ACK(확인 응답)**: 데이터가 정상적으로 수신되었음을 송신 측에 알림.
    - **재전송 메커니즘**: ACK가 수신되지 않으면 데이터를 재전송.
    - **체크섬**: 데이터 손상을 감지하고 복구 요청.
- **순서 보장**:
    - **시퀀스 번호**: 각 데이터 패킷에 번호를 부여하여 올바른 순서로 조립.
    - **리시브 윈도우(버퍼)**: 순서가 어긋난 데이터를 임시 저장 후 복구.

### **5. 3-way Handshake에서의 ACK**

- **3-way Handshake의 ACK와 데이터 전송의 ACK**는 동일한 메커니즘을 사용하지만, 용도가 다름:
    - **3-way Handshake**: 연결 설정과 초기 시퀀스 번호 동기화.
    - **데이터 전송**: 데이터 수신 확인과 재전송 보장.

#### UDP
- 기능이 거의 없음
- 연결 지향 X
- 데이터 전달 보증 X
- 순서 보장 X
- 단순하고 빠름

**IP와 거의 같고 + PORT + 체크섬 정도**
**애플리케이션에서 추가 작업 필요**

### PORT



### DNS

